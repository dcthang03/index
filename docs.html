<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hand Counter Tournament Docs</title>
  <style>
    :root {
      --bg: #070A12;
      --card: rgba(255,255,255,.05);
      --text: #EAF0FF;
      --muted: rgba(234,240,255,.68);
      --line: rgba(255,255,255,.12);
      --max: 1120px;
    }
    * { box-sizing: border-box; }
    a { color: inherit; text-decoration: none; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(124,58,237,.35), transparent 55%),
        radial-gradient(900px 600px at 90% 0%, rgba(34,211,238,.22), transparent 55%),
        radial-gradient(900px 600px at 70% 120%, rgba(96,165,250,.18), transparent 60%),
        var(--bg);
      line-height: 1.6;
    }

    .topbar {
      position: sticky;
      top: 0;
      z-index: 50;
      background: linear-gradient(to bottom, rgba(7,10,18,.92), rgba(7,10,18,.60));
      backdrop-filter: blur(12px);
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .container {
      max-width: var(--max);
      margin: 0 auto;
      padding: 0 18px;
    }
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 14px 0;
      gap: 12px;
    }
    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      letter-spacing: .2px;
    }
    .logo {
      width: 36px;
      height: 36px;
      border-radius: 12px;
      background:
        radial-gradient(12px 12px at 30% 30%, rgba(255,255,255,.55), transparent 60%),
        linear-gradient(135deg, rgba(124,58,237,.95), rgba(34,211,238,.85));
      box-shadow: 0 12px 35px rgba(124,58,237,.22);
      border: 1px solid rgba(255,255,255,.18);
      flex: 0 0 36px;
    }
    .brand small {
      display: block;
      font-weight: 600;
      color: var(--muted);
      letter-spacing: 0;
    }
    .navlinks {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .navlinks a {
      font-size: 14px;
      color: var(--muted);
      padding: 8px 10px;
      border-radius: 12px;
      border: 1px solid transparent;
    }
    .navlinks a:hover {
      color: var(--text);
      border-color: rgba(255,255,255,.12);
      background: rgba(255,255,255,.04);
    }

    .actions {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .langSwitch {
      display: inline-flex;
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 14px;
      overflow: hidden;
      background: rgba(255,255,255,.04);
    }
    .langBtn {
      border: none;
      background: transparent;
      color: var(--muted);
      font-weight: 700;
      font-size: 12px;
      padding: 9px 11px;
      cursor: pointer;
      transition: background .15s ease, color .15s ease;
    }
    .langBtn.active {
      background: rgba(255,255,255,.18);
      color: var(--text);
    }
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      color: var(--text);
      font-weight: 650;
      font-size: 14px;
    }
    .btn.primary {
      background: #ffffff;
      color: #0A0F1F;
      border-color: rgba(255,255,255,.30);
    }

    .wrap {
      max-width: var(--max);
      margin: 0 auto;
      padding: 24px 18px 40px;
    }
    .langPage[hidden] { display: none !important; }

    .hero {
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border: 1px solid var(--line);
      border-radius: 24px;
      padding: 24px;
      margin-bottom: 16px;
    }
    h1, h2, h3 { margin: 0 0 10px; line-height: 1.3; }
    h1 { font-size: 30px; }
    h2 {
      font-size: 22px;
      border-bottom: 1px solid var(--line);
      padding-bottom: 8px;
      margin-top: 24px;
    }
    p { margin: 0 0 10px; }
    .muted { color: var(--muted); }
    .card {
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: 18px;
      padding: 22px;
      margin-bottom: 14px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 10px 0;
      font-size: 14px;
    }
    th, td {
      border: 1px solid var(--line);
      padding: 8px 10px;
      text-align: left;
      vertical-align: top;
    }
    th { background: rgba(255,255,255,.06); }
    code, pre {
      font-family: Consolas, Monaco, "Courier New", monospace;
      font-size: 13px;
    }
    pre {
      background: rgba(8,12,24,.92);
      color: #e2ecff;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.10);
      padding: 12px;
      overflow-x: auto;
      margin: 10px 0;
    }
    ul, ol { margin: 8px 0 0 20px; }
    .ok { color: #7CFFB2; font-weight: 700; }
    .footer {
      text-align: center;
      color: var(--muted);
      font-size: 13px;
      margin-top: 10px;
    }
    .badge {
      display: inline-block;
      background: rgba(255,255,255,.08);
      color: #BFEFFF;
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 999px;
      padding: 5px 10px;
      font-size: 12px;
      font-weight: 700;
      margin-bottom: 10px;
    }
    @media (max-width: 920px) {
      .nav { flex-wrap: wrap; }
      .navlinks { width: 100%; justify-content: flex-start; }
      .actions { width: 100%; justify-content: flex-end; }
    }
  </style>
</head>
<body>
  <div class="topbar">
    <div class="container">
      <div class="nav">
        <a class="brand" href="index.html">
          <div class="logo" aria-hidden="true"></div>
          <div>
            Rivebase
            <small>Realtime Counter System</small>
          </div>
        </a>

        <div class="navlinks">
          <a href="index.html" id="navHome">Trang chủ</a>
          <a href="#quick-start" id="navQuick">Quick Start</a>
          <a href="#security" id="navSecurity">Bảo mật</a>
        </div>

        <div class="actions">
          <div class="langSwitch" aria-label="Language switcher">
            <button class="langBtn" id="langVi" type="button">VI</button>
            <button class="langBtn" id="langEn" type="button">EN</button>
          </div>
          <a class="btn primary" href="index.html" id="backHome">Back Home</a>
        </div>
      </div>
    </div>
  </div>

  <main class="wrap">
    <div class="langPage" data-lang="vi" id="contentVi">
      <section class="hero">
        <div class="badge">Hand Counter Tournament</div>
        <h1>Tài liệu Hand Counter Tournament</h1>
        <p>Hand Counter Tournament là hệ thống vận hành giải poker theo mô hình <strong>semi-automated tournament control</strong>, giúp club quản lý hand progression, seating và chip tracking theo thời gian thực mà không cần chip RFID hoặc camera tracking.</p>
      </section>

      <section class="card">
        <h2>Mục tiêu sản phẩm</h2>
        <ul>
          <li>Chuẩn hóa vận hành tournament theo hướng digital-first workflow.</li>
          <li>Giảm sai sót thủ công khi ghi chép hand/move/chip status.</li>
          <li>Cung cấp leaderboard realtime theo từng hand để Floor và Owner kiểm soát tình trạng giải.</li>
          <li>Tối ưu thao tác Dealer: mỗi hành động khoảng 0.5 giây/tap.</li>
          <li>Không thay đổi flow deal truyền thống, Dealer học nhanh và không gây "tech shock".</li>
        </ul>
      </section>

      <section class="card" id="security">
        <h2>Vai trò người dùng</h2>
        <table>
          <thead>
            <tr>
              <th>Role</th>
              <th>Quyền chính</th>
              <th>Mục tiêu sử dụng</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Dealer</td>
              <td>Gán seat, Next Hand, cập nhật trạng thái</td>
              <td>Vận hành bàn nhanh, ít thao tác</td>
            </tr>
            <tr>
              <td>Floor</td>
              <td>Move / Reject / Correct</td>
              <td>Kiểm soát logic tournament</td>
            </tr>
            <tr>
              <td>Owner</td>
              <td>Theo dõi toàn giải, audit</td>
              <td>Giám sát và báo cáo</td>
            </tr>
          </tbody>
        </table>
        <h3>Thời gian đào tạo</h3>
        <p>Club chỉ cần <strong>30 phút training Dealer</strong> là có thể vận hành.</p>
      </section>

      <section class="card">
        <h2>Luồng vận hành tổng quan</h2>
        <ol>
          <li>Player check-in bằng <code>player_uid</code> hoặc QR Member.</li>
          <li>Dealer scan rồi assign vào seat.</li>
          <li>Dealer tap Next Hand sau mỗi hand.</li>
          <li>System snapshot leaderboard realtime.</li>
          <li>Floor can intervene nếu cần move/reject/adjust.</li>
        </ol>
      </section>

      <section class="card" id="quick-start">
        <h2>Quick Start</h2>
        <h3>Yêu cầu hệ thống</h3>
        <ul>
          <li>Tablet hoặc iPad tại mỗi table (khuyến nghị >=10").</li>
          <li>WiFi nội bộ ổn định (LAN preferred).</li>
          <li>1 màn hình TV/Dashboard để hiển thị leaderboard.</li>
        </ul>

        <h3>Checklist triển khai nhanh</h3>
        <ul>
          <li><span class="ok">✔</span> Tạo Tournament trong Admin</li>
          <li><span class="ok">✔</span> Import danh sách Player (hoặc dùng DB có sẵn của club)</li>
          <li><span class="ok">✔</span> In QR Member (optional nhưng khuyến nghị)</li>
          <li><span class="ok">✔</span> Gán thiết bị cho từng Table</li>
          <li><span class="ok">✔</span> Test Next Hand sync</li>
          <li><span class="ok">✔</span> Verify Leaderboard realtime</li>
          <li><span class="ok">✔</span> Go-Live</li>
        </ul>
      </section>

      <section class="card">
        <h2>Data Model</h2>
        <h3>Core Entities</h3>

        <h3><code>tournament</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
          <tbody>
            <tr><td>tournament_id</td><td>text</td><td>ID giải đấu</td></tr>
            <tr><td>name</td><td>text</td><td>Tên giải</td></tr>
            <tr><td>starting_chips</td><td>int</td><td>Stack khởi điểm</td></tr>
            <tr><td>status</td><td>enum</td><td>pending / running / closed</td></tr>
          </tbody>
        </table>

        <h3><code>table</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>table_id</td><td>text</td></tr>
            <tr><td>tournament_id</td><td>fk</td></tr>
            <tr><td>max_seats</td><td>int</td></tr>
          </tbody>
        </table>

        <h3><code>seat</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>seat_id</td><td>text</td></tr>
            <tr><td>table_id</td><td>fk</td></tr>
            <tr><td>player_uid</td><td>nullable</td></tr>
            <tr><td>is_active</td><td>bool</td></tr>
          </tbody>
        </table>

        <h3><code>player</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>player_uid</td><td>text (club-defined)</td></tr>
            <tr><td>player_name</td><td>text</td></tr>
            <tr><td>member_qr</td><td>optional</td></tr>
          </tbody>
        </table>

        <p class="muted">Có thể dùng luôn <code>player_uid</code> hiện tại của club, không cần migrate hệ thống cũ.</p>
      </section>

      <section class="card">
        <h2>API / Events</h2>
        <h3>Next Hand Event</h3>
        <p>Trigger chính của hệ thống.</p>
        <p><code>POST /event/next-hand</code></p>
        <pre>{
  "table_id": "T12",
  "dealer_id": "D03",
  "hand_no": 128
}</pre>

        <p>System sẽ:</p>
        <ul>
          <li>Lock state bàn</li>
          <li>Commit snapshot leaderboard</li>
          <li>Broadcast realtime update</li>
          <li>Unlock</li>
        </ul>
        <p>Latency mục tiêu: <strong>&lt;300ms</strong></p>
      </section>

      <section class="card">
        <h2>Bảo mật</h2>
        <h3>Role-Based Access Control</h3>
        <table>
          <thead>
            <tr>
              <th>Action</th>
              <th>Dealer</th>
              <th>Floor</th>
              <th>Owner</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Next Hand</td><td>✔</td><td>✔</td><td>✔</td></tr>
            <tr><td>Assign Seat</td><td>✔</td><td>✔</td><td>✔</td></tr>
            <tr><td>Move Player</td><td>✖</td><td>✔</td><td>✔</td></tr>
            <tr><td>Reject Action</td><td>✖</td><td>✔</td><td>✔</td></tr>
            <tr><td>Audit Logs</td><td>✖</td><td>✖</td><td>✔</td></tr>
          </tbody>
        </table>
      </section>

      <section class="card">
        <h2>Troubleshooting</h2>
        <h3>Leaderboard không update</h3>
        <ul>
          <li>Check Next Hand đã tap chưa.</li>
          <li>Check network latency.</li>
          <li>Re-sync snapshot.</li>
        </ul>

        <h3>Dealer nhập sai seat</h3>
        <p>Floor dùng Move (non-destructive correction).</p>

        <h3>Mất kết nối</h3>
        <p>Local queue sẽ sync lại khi online.</p>
      </section>

      <div class="footer">Rivebase Docs - Hand Counter Tournament</div>
    </div>

    <div class="langPage" data-lang="en" id="contentEn" hidden>
      <section class="hero">
        <div class="badge">Hand Counter Tournament</div>
        <h1>Hand Counter Tournament Documentation</h1>
        <p>Hand Counter Tournament is a poker tournament operations system based on a <strong>semi-automated tournament control</strong> model. It helps clubs manage hand progression, seating, and chip tracking in real time without RFID chips or camera tracking.</p>
      </section>

      <section class="card">
        <h2>Product Goals</h2>
        <ul>
          <li>Standardize tournament operations with a digital-first workflow.</li>
          <li>Reduce manual errors in hand/move/chip status logging.</li>
          <li>Provide real-time hand-by-hand leaderboards for Floor and Owner visibility.</li>
          <li>Optimize Dealer actions to around 0.5 seconds per tap.</li>
          <li>Keep the traditional dealing flow, so dealers learn quickly without tech shock.</li>
        </ul>
      </section>

      <section class="card" id="security-en">
        <h2>User Roles</h2>
        <table>
          <thead>
            <tr>
              <th>Role</th>
              <th>Main Permissions</th>
              <th>Usage Goal</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Dealer</td>
              <td>Assign seat, Next Hand, status updates</td>
              <td>Fast table operations with minimal taps</td>
            </tr>
            <tr>
              <td>Floor</td>
              <td>Move / Reject / Correct</td>
              <td>Control tournament logic</td>
            </tr>
            <tr>
              <td>Owner</td>
              <td>Monitor tournament and audit</td>
              <td>Oversight and reporting</td>
            </tr>
          </tbody>
        </table>
        <h3>Training Time</h3>
        <p>A club typically needs only <strong>30 minutes of dealer training</strong> to operate.</p>
      </section>

      <section class="card">
        <h2>Operational Flow Overview</h2>
        <ol>
          <li>Player checks in using <code>player_uid</code> or member QR.</li>
          <li>Dealer scans and assigns a seat.</li>
          <li>Dealer taps Next Hand after each hand.</li>
          <li>System creates a real-time leaderboard snapshot.</li>
          <li>Floor can intervene for move/reject/adjust actions when needed.</li>
        </ol>
      </section>

      <section class="card" id="quick-start-en">
        <h2>Quick Start</h2>
        <h3>System Requirements</h3>
        <ul>
          <li>A tablet or iPad at each table (recommended >=10 inches).</li>
          <li>Stable local Wi-Fi (LAN preferred).</li>
          <li>One TV/dashboard screen for leaderboard display.</li>
        </ul>

        <h3>Fast Deployment Checklist</h3>
        <ul>
          <li><span class="ok">✔</span> Create Tournament in Admin</li>
          <li><span class="ok">✔</span> Import player list (or use existing club DB)</li>
          <li><span class="ok">✔</span> Print member QR codes (optional but recommended)</li>
          <li><span class="ok">✔</span> Assign devices to each table</li>
          <li><span class="ok">✔</span> Test Next Hand sync</li>
          <li><span class="ok">✔</span> Verify real-time leaderboard</li>
          <li><span class="ok">✔</span> Go Live</li>
        </ul>
      </section>

      <section class="card">
        <h2>Data Model</h2>
        <h3>Core Entities</h3>

        <h3><code>tournament</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th><th>Description</th></tr></thead>
          <tbody>
            <tr><td>tournament_id</td><td>text</td><td>Tournament ID</td></tr>
            <tr><td>name</td><td>text</td><td>Tournament name</td></tr>
            <tr><td>starting_chips</td><td>int</td><td>Starting stack</td></tr>
            <tr><td>status</td><td>enum</td><td>pending / running / closed</td></tr>
          </tbody>
        </table>

        <h3><code>table</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>table_id</td><td>text</td></tr>
            <tr><td>tournament_id</td><td>fk</td></tr>
            <tr><td>max_seats</td><td>int</td></tr>
          </tbody>
        </table>

        <h3><code>seat</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>seat_id</td><td>text</td></tr>
            <tr><td>table_id</td><td>fk</td></tr>
            <tr><td>player_uid</td><td>nullable</td></tr>
            <tr><td>is_active</td><td>bool</td></tr>
          </tbody>
        </table>

        <h3><code>player</code></h3>
        <table>
          <thead><tr><th>Field</th><th>Type</th></tr></thead>
          <tbody>
            <tr><td>player_uid</td><td>text (club-defined)</td></tr>
            <tr><td>player_name</td><td>text</td></tr>
            <tr><td>member_qr</td><td>optional</td></tr>
          </tbody>
        </table>

        <p class="muted">You can reuse the club's existing <code>player_uid</code> without migrating legacy systems.</p>
      </section>

      <section class="card">
        <h2>API / Events</h2>
        <h3>Next Hand Event</h3>
        <p>Main trigger of the system.</p>
        <p><code>POST /event/next-hand</code></p>
        <pre>{
  "table_id": "T12",
  "dealer_id": "D03",
  "hand_no": 128
}</pre>

        <p>System will:</p>
        <ul>
          <li>Lock table state</li>
          <li>Commit leaderboard snapshot</li>
          <li>Broadcast real-time update</li>
          <li>Unlock</li>
        </ul>
        <p>Target latency: <strong>&lt;300ms</strong></p>
      </section>

      <section class="card">
        <h2>Security</h2>
        <h3>Role-Based Access Control</h3>
        <table>
          <thead>
            <tr>
              <th>Action</th>
              <th>Dealer</th>
              <th>Floor</th>
              <th>Owner</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Next Hand</td><td>✔</td><td>✔</td><td>✔</td></tr>
            <tr><td>Assign Seat</td><td>✔</td><td>✔</td><td>✔</td></tr>
            <tr><td>Move Player</td><td>✖</td><td>✔</td><td>✔</td></tr>
            <tr><td>Reject Action</td><td>✖</td><td>✔</td><td>✔</td></tr>
            <tr><td>Audit Logs</td><td>✖</td><td>✖</td><td>✔</td></tr>
          </tbody>
        </table>
      </section>

      <section class="card">
        <h2>Troubleshooting</h2>
        <h3>Leaderboard not updating</h3>
        <ul>
          <li>Check whether Next Hand was tapped.</li>
          <li>Check network latency.</li>
          <li>Re-sync snapshot.</li>
        </ul>

        <h3>Dealer assigned the wrong seat</h3>
        <p>Floor should use Move (non-destructive correction).</p>

        <h3>Network disconnected</h3>
        <p>Local queue will sync automatically when online again.</p>
      </section>

      <div class="footer">Rivebase Docs - Hand Counter Tournament</div>
    </div>
  </main>

  <script>
    const langViBtn = document.getElementById('langVi');
    const langEnBtn = document.getElementById('langEn');
    const viPage = document.getElementById('contentVi');
    const enPage = document.getElementById('contentEn');

    const navHome = document.getElementById('navHome');
    const navQuick = document.getElementById('navQuick');
    const navSecurity = document.getElementById('navSecurity');
    const backHome = document.getElementById('backHome');

    function setLanguage(lang) {
      const isEn = lang === 'en';
      document.documentElement.lang = isEn ? 'en' : 'vi';

      viPage.hidden = isEn;
      enPage.hidden = !isEn;

      navHome.textContent = isEn ? 'Home' : 'Trang chủ';
      navQuick.textContent = 'Quick Start';
      navSecurity.textContent = isEn ? 'Security' : 'Bảo mật';
      backHome.textContent = isEn ? 'Back Home' : 'Về trang chủ';

      navQuick.setAttribute('href', isEn ? '#quick-start-en' : '#quick-start');
      navSecurity.setAttribute('href', isEn ? '#security-en' : '#security');

      langViBtn.classList.toggle('active', !isEn);
      langEnBtn.classList.toggle('active', isEn);

      localStorage.setItem('rivebase-docs-lang', isEn ? 'en' : 'vi');
    }

    langViBtn.addEventListener('click', () => setLanguage('vi'));
    langEnBtn.addEventListener('click', () => setLanguage('en'));

    setLanguage(localStorage.getItem('rivebase-docs-lang') === 'en' ? 'en' : 'vi');
  </script>
</body>
</html>
